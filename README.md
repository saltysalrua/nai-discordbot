# 🎨 NovelAI Discord Bot

## 简介
一个简洁强大(这是一开始，现在是不简洁但强大)的Discord机器人，用于NovelAI图像生成。使用你自己的API密钥，在Discord生成图片
~~分享到DC群里开银趴~~

**所有代码来自Claude 3.7sonnet**

~~出事别找我~~

## 如何使用
- 获取discord token(网上有教程)
- git clone后运行start.sh，安装依赖，并根据提示修改config.txt
- 开始享受吧，之后启动只需要使用`python bot.py`

## 特性

### 🖼️ 图像生成核心功能

- **多种生成命令**：从简单的`/nai`到高级的`/naigen`，满足不同需求
- **全面参数控制**：支持调整尺寸、采样器、步数、CFG比例、噪声调度等参数
- **多模型支持**：完整支持所有NovelAI模型，包括最新的nai-diffusion-4系列
- **图像变体生成**：使用`/naivariation`命令基于已生成图像创建变体
- **负面提示词**：可自定义负面提示词以改善生成结果

### 🔑 API密钥管理

- **个人密钥管理**：每个用户可以管理自己的NovelAI API密钥
- **密钥共享**：用户可以选择将密钥共享给服务器内其他成员
- **密钥有效期**：可设置密钥有效期限，保证安全性
- **智能密钥选择**：自动选择最佳共享密钥，实现负载均衡
- **持久化存储**：可选择在机器人重启后保留密钥设置

### 📝 提示词模板系统

- **模板保存与管理**：使用`/savetemplate`保存常用提示词和参数
- **模板分享**：可以在服务器内共享模板
- **标签系统**：为模板添加标签，便于分类和搜索
- **参数保存**：可选择是否保存生成参数到模板中
- **模板组合**：可以将模板与其他参数组合使用

### 🔄 批量生成系统

- **变量批量处理**：使用`/naibatch`命令支持变量替换批量生成
- **参数变化**：支持同时变化多个参数组合生成
- **批量预览**：使用`/previewbatch`预览批量生成计划
- **任务状态追踪**：通过`/batchstatus`查看批量任务进度
- **任务控制**：支持取消正在进行的批量任务

### 👥 协作生成功能

- **接力生成**：使用`/relay`启动多人参与的接力生成会话
- **内容贡献**：多名成员可以为同一图像添加内容
- **时间限制**：设置会话有效期，避免无限期等待
- **参与者管理**：限制最大参与人数，保持过程可控
- **成员可见性**：显示所有参与成员的贡献

### 🌐 自动翻译功能

- **多API支持**：支持百度翻译、有道翻译、Azure翻译、OpenAI和Google AI Studio等多种翻译服务
- **智能检测**：自动检测中文内容并进行翻译，无需额外操作
- **透明化展示**：同时显示原始中文和翻译后的英文提示词
- **LLM翻译**：支持使用大语言模型进行更高质量的翻译
- **本地模型兼容**：支持使用兼容OpenAI接口的本地LLM模型
- **缓存机制**：避免重复翻译相同内容，提高效率
- **全功能集成**：所有生成命令（包括批量和协作生成）均支持翻译功能

### 🔧 实用工具

- **API状态检查**：使用`/checkapi`检查NovelAI API可用性
- **机器人状态**：使用`/botstatus`查看机器人运行状态和性能
- **队列系统**：自动队列化处理请求，避免API限制
- **热更新**：支持从GitHub拉取更新而无需重启
- **详细帮助**：`/help`命令提供全面的功能说明


## 📜 许可证

[MIT License](LICENSE)

## 免责声明

此项目不隶属于NovelAI。使用此机器人时，请确保遵守NovelAI的服务条款。用户需要拥有有效的NovelAI订阅并使用自己的API密钥。
